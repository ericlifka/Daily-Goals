// to debug rendering

context_ = require('ember-precompile').context
fs = require('fs')
var jQuery = require('jquery');
var vm = require('vm');

compiledTemplateString = fs.readFileSync('template.js', 'utf8').toString();
templateName = 'test1'
templateContext = {"thing": "its and it"}

var execContext = context_.getContext({
      // name of the handlebars template to compile
      template: templateName,

      // rendered handlebars template
      renderedTemplate: null,

      // template context
      context: templateContext,
      
      options: {data: {buffer: []}},
      
      $: jQuery,
      jQuery: jQuery
    });
vm.runInContext(compiledTemplateString, execContext);
vm.runInContext('  \
      view = Ember.View.create({template: Ember.TEMPLATES[template]});  \
      view.set("context", context);  \
      renderedTemplate = view.renderToBuffer();', execContext)

execContext.renderedTemplate.buffer
